<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/dashboard.css">
    <link rel="stylesheet" href="/css/navbar.css">
    <title>Dashboard</title>
</head>

<body>
    <header>
        <a href="#" class="logo">Dog Media</a>
        <div class="navigation">
            <ul class="menu">
                <li class="menu-item">
                    <form class="search-container" method="GET" action="/search">
                        <input class="search-input" type="text" name="keyword" placeholder="Search profile" />
                        <button><i class="fa fa-search"></i></button>
                    </form>
                </li>
                <li class="menu-item"><a href="/profile">Profile</a></li>
                <li class="menu-item"><a href="/dashboard">Home</a></li>
                <li class="menu-item"><a href="/conversation">Message</a></li>
                <li class="menu-item">
                    <a class="sub-btn" href="#">More<i class="fa fa-angle-down"></i> </a>
                    <ul class="sub-menu">
                        <li class="sub-item"><a href="#">Account</a></li>
                        <li class="sub-item"><a href="#">Settings</a></li>
                        <li class="sub-item"><a href="#">Help</a></li>
                        <li class="sub-item"><a href="/logOut">Log Out</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </header>

    <div class="container">
        <div class="post-form-container">
            <form action="/createPost" method="post">
                <textarea name="thoughtsFields" type="text" placeholder="What are your thoughts....."
                    id="text-area-thoughts"></textarea>
                <div class="emotion-button-container">
                    <div class="emotion-container">
                        <div>
                            <p>Mood:</p>
                        </div>
                        <div class="emotion">
                            <label for="emotion-mad">&#128514</label>
                            <input type="radio" name="emotionSelection" id="emotion-happy" value="128514" />
                        </div>
                        <div class="emotion">
                            <label for="emotion-sad">&#128517</label>
                            <input type="radio" name="emotionSelection" id="emotion-sad" value="128517" />
                        </div>
                        <div class="emotion">
                            <label for="emotion-okay">&#128526</label>
                            <input type="radio" name="emotionSelection" id="emotion-okay" value="128526" />
                        </div>
                        <div class="emotion">
                            <label for="emotion-mad">&#128532</label>
                            <input type="radio" name="emotionSelection" id="emotion-mad" value="128532" />
                        </div>
                        <div class="emotion">
                            <label for="emotion-other">Other</label>
                            <input type="radio" name="emotionSelection" id="emotion-other" value="other" />
                        </div>
                    </div>
                    <div class="button-container">
                        <button type="submit" class="btn button-post-this" id="button-post-this">Post this!</button>
                    </div>
                </div>
            </form>
        </div>
        <!-- Loop through the posts (array) variable that is coming from the request handler from index.js and generate the HTML posts with it's data -->
        <% for (var i=0; i < posts.length; i++) { %>
            <div class="card">
                <div class="row">
                    <div class="profile-container col-2">
                        <div class="card-profile-img-container">
                            <img src="<%= posts[i]['picture'] %>" width="100%" />
                        </div>
                        <div style="text-align: center;">
                            <p>
                                Mood: &#<%= posts[i]['mood'] %>
                            </p>
                        </div>
                    </div>
                    <div class="posts-content col-10">
                        <div class="card-body">
                            <%= posts[i]['thought'] %>
                        </div>
                        <div class="card-info-info">
                            <p class="card-date-tag">
                                <small class="text-muted">
                                    <%= posts[i]['date'] %>
                                        <small> by
                                            <a href="/profile/<%= posts[i]['username'] %>">
                                                <%= posts[i]['username'] %>
                                            </a>
                                        </small>
                                </small>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <% } %>
    </div>
    <script src="https://use.fontawesome.com/9d09b39586.js"></script>
    <script>
        // disable the post button on render
        var postButton = document.getElementById('button-post-this');
        postButton.disabled = true;
        postButton.style.background = '#cccccc';
        postButton.style.color = '#666666';

        // add an onclick to each emoji selection, once clicked enable the post button 
        var emojiOptions = document.getElementsByTagName('input');
        for (var i in emojiOptions) {
            emojiOptions[i].onclick = function (e) {
                postButton.disabled = false;
                postButton.style.background = 'whitesmoke';
                postButton.style.border = 'none';
                postButton.style.color = 'black';
            }
        }
    </script>
</body>

</html>